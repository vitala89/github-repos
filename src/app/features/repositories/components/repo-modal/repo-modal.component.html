<dialog
  (toggle)="onToggle($event)"
  #modalRef
  [id]="modalId()"
  popover
  class="fixed top-1/2 left-1/2 z-50 max-w-md w-full -translate-x-1/2 -translate-y-1/2 p-6 bg-white dark:bg-neutral-900 shadow-sm shadow-gray-200 dark:shadow-black/30 rounded-2xl transition-colors animate-fade-in outline-none"
>
  <button
    class="absolute top-3 right-4 text-xl text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors cursor-pointer active:scale-95"
    [attr.popovertarget]="modalId()"
    popovertargetaction="hide"
    aria-label="Close"
    type="button"
  >
    <lucide-icon [name]="xIcon" title="Close"></lucide-icon>
  </button>
  <div class="flex flex-col items-center gap-2 mb-4">
    <img
      [ngSrc]="repo().owner.avatar_url"
      [alt]="repo().owner.login"
      [width]="64"
      [height]="64"
      class="w-16 h-16 rounded-full object-cover shadow-sm mb-2"
    />
    <h2
      class="text-lg font-bold text-blue-600 dark:text-blue-400 mb-0 text-center"
    >
      {{ repo().name }}
    </h2>
  </div>
  <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
    {{ repo().description }}
  </p>

  <div class="mb-4 text-sm flex flex-row items-center space-x-4">
    <div
      class="rounded-full px-3 py-1 font-medium bg-gray-50 dark:bg-neutral-700 text-gray-800 dark:text-gray-200 shadow-sm inline-flex items-center gap-1 align-middle"
    >
      <lucide-icon
        title="Number of stars"
        [name]="starIcon"
        class="inline align-middle"
      ></lucide-icon>
      <span class="align-middle">{{ repo().stargazers_count }}</span>
    </div>
    <div
      class="rounded-full px-3 py-1 font-medium bg-gray-50 dark:bg-neutral-700 text-gray-800 dark:text-gray-200 shadow-sm inline-flex items-center gap-1"
    >
      <lucide-icon
        title="Issues"
        [name]="bugIcon"
        class="inline align-middle"
      ></lucide-icon>
      {{ repo().open_issues_count }}
    </div>
    <div
      class="text-gray-500 dark:text-gray-400 inline-flex items-center gap-1"
    >
      <lucide-icon
        title="Owner"
        [name]="userIcon"
        class="inline align-middle"
      ></lucide-icon>
      {{ repo().owner.login }}
    </div>
  </div>
  <h3 class="mb-2 text-sm font-medium text-gray-600 dark:text-gray-300">
    Rate this repository:
  </h3>
  <app-star-rating [value]="displayStars()" (rated)="setPendingStars($event)" />
</dialog>
